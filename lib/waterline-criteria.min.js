!function(a){function b(a,b){return a?w.filter(a,function(a){return g(a,b)}):a}function c(a,b){if(!b||!a)return a;var c=d(w.clone(a),b);return c}function d(a,b){function c(a){var b=1;return"-"===a[0]&&(b=-1,a=a.substr(1)),function(c,d){var e=c[a]<d[a]?-1:c[a]>d[a]?1:0;return e*b}}function d(){var a=arguments;return function(b,d){for(var e=0,f=0,g=a.length;0===f&&g>e;)f=c(a[e])(b,d),e++;return f}}var e=[];return w.each(w.keys(b),function(a){-1===b[a]?e.push("-"+a):e.push(a)}),a.sort(d.apply(null,e)),a}function e(a,b){return b&&a?w.rest(a,b):a}function f(a,b){return b&&a?w.first(a,b):a}function g(a,b,c){return!b||w.isEqual(b,{})?!0:w.all(b,function(b,d){return l(a,d,b,c)})}function h(a,b){var c=!1;return w.each(b,function(b){g(a,b)&&(c=!0)}),c}function i(a,b){var c=!0;return w.each(b,function(b){g(a,b)||(c=!1)}),c}function j(a,b){for(var c in b)if(!t(a[c],b[c]))return!1;return!0}function k(a,b){return!g(a,b)}function l(a,b,c,d){if(d){if("equals"===b||"="===b||"equal"===b)return p(a,d,c,x["="]);if("not"===b||"!"===b)return p(a,d,c,x["!"]);if("greaterThan"===b||">"===b)return p(a,d,c,x[">"]);if("greaterThanOrEqual"===b||">="===b)return p(a,d,c,x[">="]);if("lessThan"===b||"<"===b)return p(a,d,c,x["<"]);if("lessThanOrEqual"===b||"<="===b)return p(a,d,c,x["<="]);if("startsWith"===b)return p(a,d,c,q);if("endsWith"===b)return p(a,d,c,r);if("contains"===b)return p(a,d,c,s);if("like"===b)return p(a,d,c,t);throw new Error("Invalid query syntax!")}return"or"===b.toLowerCase()?h(a,c):"not"===b.toLowerCase()?k(a,c):"and"===b.toLowerCase()?i(a,c):"like"===b.toLowerCase()?j(a,c):w.isArray(c)?w.any(c,function(c){return x["="](a[b],c)}):w.isObject(c)&&n(c)?g(a,c,b):p(a,b,c,x["="])}function m(a,b){return(w.isUndefined(a)||null===a)&&(a=""),(w.isUndefined(b)||null===b)&&(b=""),w.isString(a)&&w.isString(b)&&(a=a.toLowerCase(),b=b.toLowerCase()),w.isNumber(a)||(a="undefined"!=typeof a.toString?a.toString():""+a),w.isNumber(b)||(b="undefined"!=typeof b.toString?b.toString():""+b),[a,b]}function n(a){return w.isObject(a)&&(a.not||a.greaterThan||a.lessThan||a.greaterThanOrEqual||a.lessThanOrEqual||a["<"]||a["<="]||a["!"]||a[">"]||a[">="]||a.startsWith||a.endsWith||a.contains||a.like)}function o(a){return Math.pow(+a,2)>0}function p(a,b,c,d){return o(c)&&o(a[b])&&(c=+c,a[b]=+a[b]),w.isUndefined(a[b])?!1:d(a[b],c)?!0:!1}function q(a,b){return u(a,b+"%")}function r(a,b){return u(a,"%"+b)}function s(a,b){return u(a,"%"+b+"%")}function t(a,b){return u(a,b)}function u(a,b){if(w.isRegExp(b));else{if(!w.isString(b))throw console.error("matchString:"),console.error(b),new Error("Unexpected match string: "+b+" Please use a regexp or string.");b=b.replace(/%%%/g,"%"),b=v(b),b=b.replace(/([^%]*)%([^%]*)/g,"$1.*$2");var c="i";b=new RegExp("^"+b+"$",c)}if(w.isNumber(a))a=""+a;else if(w.isBoolean(a))a=a?"true":"false";else if(!w.isString(a))return!1;return a.match(b)?!0:!1}function v(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var w=a._;a.WC=function(a,d){var g="__origindex",h=w.clone(a);w.each(h,function(a,b){a[g]=b}),h=b(h,d.where),h=c(h,d.sort),h=e(h,parseInt(d.skip,10)),h=f(h,parseInt(d.limit,10));var i=w.pluck(h,g);return w.each(a,function(a){delete a[g]}),i};var x={"=":function(a,b){var c=m(a,b);return c[0]==c[1]},"!":function(a,b){var c=m(a,b);return c[0]!=c[1]},">":function(a,b){var c=m(a,b);return c[0]>c[1]},">=":function(a,b){var c=m(a,b);return c[0]>=c[1]},"<":function(a,b){var c=m(a,b);return c[0]<c[1]},"<=":function(a,b){var c=m(a,b);return c[0]<=c[1]}}}(window);